var c=Object.assign;import{degToRad as f}from"../utils/index.js";import{clamp as y}from"../utils/index.js";import{clone as n}from"../utils/store/index.js";export default{setUIParams(t,o){t.ui=o},setEditParams(t,o){t.editParams=o},setEditParam(t,{name:o,value:h}){let r=n(t.editParams);t.editParams=r;const i=o.split(".");for(let s=0;s<i.length-1;s++)r=r[i[s]];r[i[i.length-1]]=h},historyState(t){t.history.canUndo=t.history.cursor<t.history.stack.length-1,t.history.canRedo=t.history.cursor>0},undo(t){t.history.cursor++,t.editParams=n(t.history.stack[t.history.cursor])},redo(t){t.history.cursor--,t.editParams=n(t.history.stack[t.history.cursor])},saveSnapshot(t,o){t.history.stack.splice(0,t.history.cursor),t.history.cursor=0,t.history.stack.unshift(o)},setImageData(t,o){t.image={width:o.width,height:o.height}},setCropParams(t,o){o=c(c({},t.editParams.crop),o);const{width:h,height:r}=t.image,i=f(o.angle+o.rotate),s=Math.abs(i),e=(Math.cos(s)*h+Math.sin(s)*r)/h,d=(Math.sin(s)*h+Math.cos(s)*r)/r,a=Math.max(o.scale,e,d),l=(a-e)/2,m=(a-d)/2,[u,g]=o.translate,P=[y(u,-l,l),y(g,-m,m)];t.editParams.crop=c(c({},o),{scale:a,translate:P})}};
