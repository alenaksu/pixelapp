import{identityMatrix as o,setUniforms as f}from"../../../utils/index.js";import p from"../../Filter.js";import d from"./shader.vert.js";export default class m extends p{constructor(...e){super(...e);this.name="crop",this.enabled=!0,this.parameters={translate:[0,0],rotate:0,scale:1,angle:0,flip:0}}static get vertexShader(){return d}setupUniforms(){const e=this.gl,{translate:a,rotate:i,scale:s,angle:n,flip:t}=this.parameters,r=e.drawingBufferWidth/e.drawingBufferHeight,c=o(),l=o().scaleSelf(1/r,1).rotateSelf(0,0,i+n).translateSelf(a[0]*2*r,a[1]*2).scaleSelf(s,s,1).scaleSelf(r,1);t&&l.scaleSelf(t===1||t===3?-1:1,t===2||t===3?-1:1),f(e,{model:l.toFloat32Array(),projection:c.toFloat32Array()})}}
